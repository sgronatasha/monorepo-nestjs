export class UsersController {
  constructor(private readonly usersService: UsersService) {}

  @MessagePattern({ cmd: 'register' })
  async register(createUserDto: CreateUserDto): Promise<UserRto> {
    const user = await this.usersService.create(createUserDto);
    return new UserRto(user);
  }

  @MessagePattern({ cmd: 'getAllUsers' })
  async getAllUsers(): Promise<UserRto[]> {
    const users = await this.usersService.findAll();
    return users.map(user => new UserRto(user));
  }
}